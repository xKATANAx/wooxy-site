<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="script.js"></script>
<script>
    function initDashboard() {
        const currentUser = localStorage.getItem('currentUser');
        if (!currentUser) { window.location.href = 'index.html'; return; }

        db.ref('users/' + currentUser).on('value', (snapshot) => {
            const user = snapshot.val();
            if (!user) return;
            if (user.status === 'banned') { window.location.href = 'index.html'; }
            
            // Senin Admin Butonunu Görünür Yapma
            if (user.role === 'admin') {
                const badge = document.getElementById('adminBadge');
                if(badge) badge.style.display = 'block';
            }
        });

        // Online Takibi (Orijinal Kodun Üzerine)
        setInterval(() => {
            db.ref('users/' + currentUser).update({ lastSeen: Date.now() });
        }, 10000);
    }
    window.onload = initDashboard;
</script>